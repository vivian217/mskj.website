{"version":3,"sources":["webpack:///src/views/components/PrUpload.vue","webpack:///./src/views/components/PrUpload.vue?8e15","webpack:///./src/views/components/PrUpload.vue"],"names":["PrUpload","name","props","url","required","default","rename","multiple","drag","progress","accept","format","maxSize","maxNumber","data","files","methods","beforeUpload","this","length","$Message","error","content","duration","closable","success","resp","fileInfo","push","preview","file","window","open","response","errorFormat","join","errorSize","size","remove","i","len","splice","removeAll","$refs","clearFiles","watch","_files","$emit","created","components_PrUpload","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","action","type","show-upload-list","max-size","before-upload","on-success","on-preview","on-remove","on-format-error","on-exceeded-size","staticStyle","padding","color","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"oDA6BA,IAAAA,GACAC,KAAA,YACAC,OAEAC,KACAC,UAAA,GAGAH,MACAI,QAAA,QAGAC,QACAD,SAAA,GAGAE,UACAF,SAAA,GAGAG,MACAH,SAAA,GAGAI,UACAJ,SAAA,GAGAK,QACAL,QAAA,IAGAM,QACAN,QAAA,WACA,WAIAO,SACAP,QAAA,SAGAQ,WACAR,QAAA,IAGAS,KA9CA,WA+CA,OAEAC,SAEAD,UAGAE,SAEAC,aAFA,WAGA,QAAAC,KAAAH,MAAAI,OAAA,EAAAD,KAAAL,aACAK,KAAAE,SAAAC,OACAC,QAAA,aAAAJ,KAAAL,UACAU,SAAA,GACAC,UAAA,KAEA,IAKAC,QAdA,SAcAC,GACA,SAAAA,EAAA,MACA,IAAAC,EAAAD,EAAA,KAEAR,KAAAH,MAAAa,KAAAD,KAIAE,QAtBA,SAsBAC,GAEAC,OAAAC,KAAAF,EAAAG,SAAAH,KAAAD,QAAA,WAGAK,YA3BA,WA4BAhB,KAAAE,SAAAC,OACAC,QAAA,mBAAAJ,KAAAP,OAAAwB,KAAA,KACAZ,SAAA,GACAC,UAAA,KAIAY,UAnCA,SAmCAN,GACAZ,KAAAE,SAAAC,OACAC,SACAQ,EAAA7B,KACA,OACA,IAAA6B,EAAAO,KAAA,WACA,gBACAnB,KAAAN,QAAA,MACAuB,KAAA,IACAZ,SAAA,GACAC,UAAA,KAIAc,OAjDA,SAiDAR,GACA,QAAAS,EAAA,EAAAC,EAAAtB,KAAAH,MAAAI,OAAAoB,EAAAC,EAAAD,IACA,GAAArB,KAAAH,MAAAwB,GAAA,OAAAT,EAAA,MACAZ,KAAAH,MAAA0B,OAAAF,EAAA,GACA,QAKAG,UA1DA,WA4DAxB,KAAAH,SAEAG,KAAAyB,MAAA,OAAAC,eAGAC,OAEA9B,MAAA,SAAA+B,GAEA5B,KAAA6B,MAAA,aAAAD,KAGAE,QA9HA,WAgIA9B,KAAAJ,KAAA,OAAAI,KAAAZ,SC1Je2C,GADEC,OAFjB,WAA0B,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,UAAeG,IAAA,SAAAC,OAAoBC,OAAAR,EAAAhD,IAAAF,KAAAkD,EAAAlD,KAAAa,KAAAqC,EAAArC,KAAAP,SAAA4C,EAAA5C,SAAAqD,KAAAT,EAAA3C,KAAA,gBAAAqD,mBAAAV,EAAA1C,SAAAC,OAAAyC,EAAAzC,OAAAC,OAAAwC,EAAAxC,OAAAmD,WAAAX,EAAAvC,QAAAmD,gBAAAZ,EAAAlC,aAAA+C,aAAAb,EAAA1B,QAAAwC,aAAAd,EAAAtB,QAAAqC,YAAAf,EAAAb,OAAA6B,kBAAAhB,EAAAjB,YAAAkC,mBAAAjB,EAAAf,aAA0XkB,EAAA,OAAYe,aAAaC,QAAA,YAAoBhB,EAAA,QAAae,aAAaE,MAAA,WAAkBb,OAAQE,KAAA,yBAAAvB,KAAA,QAA6Cc,EAAAqB,GAAA,KAAAlB,EAAA,KAAAH,EAAAqB,GAAA,YAAArB,EAAAqB,GAAA,KAAAlB,EAAA,KAAAH,EAAAqB,GAAA,2BAE5pBC,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACE5E,EACAiD,GATF,EAEA,KAEA,KAEA,MAUe4B,EAAA,EAAAH,EAAiB","file":"js/0.9e8db0ec17d3d444a192.js","sourcesContent":["<!-- 文件上传 -->\r\n<template>\r\n    <div class=\"pr-upload\">\r\n        <Upload\r\n                ref=\"upload\"\r\n                :action=\"url\"\r\n                :name=\"name\"\r\n                :data=\"data\"\r\n                :multiple=\"multiple\"\r\n                :type=\"drag ? 'drag' : 'select'\"\r\n                :show-upload-list=\"progress\"\r\n                :accept=\"accept\"\r\n                :format=\"format\"\r\n                :max-size=\"maxSize\"\r\n                :before-upload=\"beforeUpload\"\r\n                :on-success=\"success\"\r\n                :on-preview=\"preview\"\r\n                :on-remove=\"remove\"\r\n                :on-format-error=\"errorFormat\"\r\n                :on-exceeded-size=\"errorSize\">\r\n            <div style=\"padding: 20px 0\">\r\n                <Icon type=\"ios-add-circle-outline\" size=\"52\" style=\"color: #c6c6c6\"></Icon>\r\n                <p>点击上传图片</p>\r\n                <p>或将图片拖拽到此区域</p>\r\n            </div>\r\n        </Upload>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: 'pr-upload',\r\n        props: {\r\n            // 服务器接收文件地址\r\n            url: {\r\n                required: true\r\n            },\r\n            // 上传文件字段名\r\n            name: {\r\n                default: 'file'\r\n            },\r\n            // 是否对文件重命名\r\n            rename: {\r\n                default: true\r\n            },\r\n            // 多文件上传\r\n            multiple: {\r\n                default: false\r\n            },\r\n            // 拖拽上传\r\n            drag: {\r\n                default: true\r\n            },\r\n            // 展示上传进度\r\n            progress: {\r\n                default: true\r\n            },\r\n            // 文件类型，选择文件时限定\r\n            accept: {\r\n                default: ''\r\n            },\r\n            // 后缀名，选择后检查\r\n            format: {\r\n                default: () => {\r\n                    return []\r\n                }\r\n            },\r\n            // 文件最大大小, KB\r\n            maxSize: {\r\n                default: 2048 * 1024\r\n            },\r\n            // 文件最大个数5\r\n            maxNumber: {\r\n                default: 1\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                // 上传成功的文件列表\r\n                files: [],\r\n                // 额外附加参数\r\n                data: {},\r\n            }\r\n        },\r\n        methods: {\r\n            // 上传之前\r\n            beforeUpload() {\r\n                if (this.files.length + 1 > this.maxNumber) {\r\n                    this.$Message.error({\r\n                        content: '文件个数超出限制: ' + this.maxNumber,\r\n                        duration: 10,\r\n                        closable: true\r\n                    })\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            // 上传成功\r\n            success(resp) {\r\n                if (resp['code'] === 200) {\r\n                    let fileInfo = resp['data'];\r\n                    // 加入文件列表\r\n                    this.files.push(fileInfo)\r\n                }\r\n            },\r\n            // 点击预览\r\n            preview(file) {\r\n                // 新标签打开预览文件窗口\r\n                window.open(file.response.file.preview, '_blank')\r\n            },\r\n            // 格式错误\r\n            errorFormat() {\r\n                this.$Message.error({\r\n                    content: '文件格式有误, 允许的格式有: ' + this.format.join(' '),\r\n                    duration: 10,\r\n                    closable: true\r\n                })\r\n            },\r\n            // 大小错误\r\n            errorSize(file) {\r\n                this.$Message.error({\r\n                    content: [\r\n                        file.name,\r\n                        '文件大小',\r\n                        '(', file.size / 1024, 'KB)',\r\n                        '超出限制: max <= ',\r\n                        this.maxSize, 'KB'\r\n                    ].join(''),\r\n                    duration: 10,\r\n                    closable: true\r\n                })\r\n            },\r\n            // 点击删除\r\n            remove(file) {\r\n                for (let i = 0, len = this.files.length; i < len; i++) {\r\n                    if (this.files[i]['uuid'] === file['uuid']) {\r\n                        this.files.splice(i, 1)\r\n                        break\r\n                    }\r\n                }\r\n            },\r\n            // 清理所有文件\r\n            removeAll() {\r\n                // 文件列表置空\r\n                this.files = []\r\n                // 删除组件内部文件\r\n                this.$refs['upload'].clearFiles()\r\n            }\r\n        },\r\n        watch: {\r\n            // 文件列表发生了变化\r\n            files: function (files) {\r\n                // 通知\r\n                this.$emit('fileChange', files)\r\n            },\r\n        },\r\n        created() {\r\n            // 添加附加参数\r\n            this.data['rename'] = this.rename\r\n        }\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/components/PrUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pr-upload\"},[_c('Upload',{ref:\"upload\",attrs:{\"action\":_vm.url,\"name\":_vm.name,\"data\":_vm.data,\"multiple\":_vm.multiple,\"type\":_vm.drag ? 'drag' : 'select',\"show-upload-list\":_vm.progress,\"accept\":_vm.accept,\"format\":_vm.format,\"max-size\":_vm.maxSize,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.success,\"on-preview\":_vm.preview,\"on-remove\":_vm.remove,\"on-format-error\":_vm.errorFormat,\"on-exceeded-size\":_vm.errorSize}},[_c('div',{staticStyle:{\"padding\":\"20px 0\"}},[_c('Icon',{staticStyle:{\"color\":\"#c6c6c6\"},attrs:{\"type\":\"ios-add-circle-outline\",\"size\":\"52\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"点击上传图片\")]),_vm._v(\" \"),_c('p',[_vm._v(\"或将图片拖拽到此区域\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7147a820\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/components/PrUpload.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PrUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PrUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7147a820\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PrUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/components/PrUpload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}